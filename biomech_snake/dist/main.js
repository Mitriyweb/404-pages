"use strict";(()=>{var r=class{constructor(n,s,l){this.index=n;this.x=s;this.y=l;this.vx=0;this.vy=0;this.angle=0;this.length=10;this.damping=.2}moveTo(n,s){let l=n-this.x,o=s-this.y;this.vx+=l*.1,this.vy+=o*.1,this.vx*=1-this.damping,this.vy*=1-this.damping,this.x+=this.vx,this.y+=this.vy}follow(n){let s=n.x-this.x,l=n.y-this.y,o=Math.hypot(s,l),c=Math.atan2(l,s),d=o-this.length;this.x+=Math.cos(c)*d*.5,this.y+=Math.sin(c)*d*.5}};var h={background:"#000",head:"#fff",headStroke:"#888",headEye:"#222",mouth:"#c33",mouthStroke:"#a22",body:"#ccc",tail:"#888",leg:"#aaa",legClaw:"#fff"};var a={segmentCount:40,headRadius:10,bodyRadius:4,tailRadius:2,tailSegments:5,lag:.12,legLength:18,legWidth:2,legClawRadius:2};var g=document.getElementById("canvas"),e=g.getContext("2d");g.width=innerWidth;g.height=innerHeight;var i=[],u=innerWidth/2,y=innerHeight/2;for(let t=0;t<a.segmentCount;t++)i.push(new r(t,100-t*10,300));window.addEventListener("mousemove",t=>{u=t.clientX,y=t.clientY});g.addEventListener("mousedown",t=>{if(t.button===0&&i.length<80){let n=i[i.length-1];i.push(new r(i.length,n.x,n.y))}t.button===2&&i.length>5&&i.pop()});g.addEventListener("contextmenu",t=>t.preventDefault());function x(){let t=i[0],n=a.lag,s=t.x+(u-t.x)*n,l=t.y+(y-t.y)*n;t.moveTo(s,l);for(let o=1;o<i.length;o++)i[o].follow(i[o-1])}function b(){e.fillStyle=h.background,e.fillRect(0,0,g.width,g.height);for(let t=0;t<i.length;t++){let n=i[t];if(t===0){let l=Math.atan2(y-n.y,u-n.x);e.save(),e.translate(n.x,n.y),e.rotate(l),e.beginPath(),e.ellipse(0,0,a.headRadius*1.2,a.headRadius,0,0,Math.PI*2),e.fillStyle=h.head,e.fill(),e.strokeStyle=h.headStroke,e.lineWidth=2,e.stroke(),e.beginPath(),e.arc(6,-5,2,0,Math.PI*2),e.fillStyle=h.headEye,e.fill(),e.restore();continue}e.beginPath(),e.arc(n.x,n.y,t>i.length-a.tailSegments?a.tailRadius:a.bodyRadius,0,Math.PI*2),e.fillStyle=t>i.length-a.tailSegments?h.tail:h.body,e.fill();let s=t<i.length-1?Math.atan2(i[t+1].y-n.y,i[t+1].x-n.x):Math.atan2(n.y-i[t-1].y,n.x-i[t-1].x);if(t<i.length-a.tailSegments)for(let l=-1;l<=1;l+=2){let o=s+l*Math.PI/2.5,c=a.legLength-t*.2,d=n.x+Math.cos(o)*c,m=n.y+Math.sin(o)*c;e.beginPath(),e.moveTo(n.x,n.y),e.lineTo(d,m),e.strokeStyle=h.leg,e.lineWidth=a.legWidth,e.stroke(),e.beginPath(),e.arc(d,m,a.legClawRadius,0,Math.PI*2),e.fillStyle=h.legClaw,e.fill()}}}function f(){x(),b(),requestAnimationFrame(f)}f();})();
